# 第四章 文件以及本地数据处理
- 主要内容
1. 字符以及编码
2. 文本文件处理
3. 数据的维度(CSV JSON)
4. 正则表达式

## 4.1字符以及编码
1. ASCII
2. GB2312(GBK)
3. Unicode
4. UTF-8
5. Python中的字符集
---
ASCII 即,美国信息交换标准代码.

以二进制的方式储存

利用扩展ASCII集,可以表示欧洲很多文字(ISO8859)
- 合并使用解决不了
- 中韩日表示不了

---
GB2312, 信息交换用汉字编码字符集
兼容ASCII

由于西文和中文解码有一定的区别,故中文的首位设置为1,解码两个bit一起解
- GB2312的字符太少了
- 日文韩文还是支持不了

---
Unicode 基本上覆盖了各个国家的文字
用U+xxxxxx表示

分配了16个庙,用的最多的是SMP基础庙

- Unicode只是规定了如何去编码,并没有表示如何传输,保存这个编码
  - 关键在于通信的双方都要认可
- Unicode有多个编码方式,分别是UTF-8、UTF-16等

---
UTF-8
- 可变长编码
- 代码单元由8为组成
  - 单字节
  - 两字节...
---

chr和ord可以让编码值和字符相互变换

## 4.2 文件
### 一、概念
- 存储在外部介质上的数据或者信息的集合,如:
  - 源程序
  - 文档
  - 图像
- 有序的字节byte和字符char序列

- 文件类型
  - 二进制文件
  - 文本文件

- ANSI是本地的编码 中文下是GBK
  
### 二、文件操作
- 打开文件 open
  - 建立磁盘上的文件于程序中的对象的关联
- 文件操作
  - 读取
  - 写入
  - 定位
- 关闭文件 close

#### 文件打开操作
- Python用open()函数打开文件并返回文件对象
  ```py
  <变量名>=open(file,mode = 'r',encoding = None)
  ```
- 文件名:可以是完整的路径的名字或者当前路径下的文件名字
- mode 是打开的模式
- encoding 是文件编码的格式

- open()函数提供的7中基本的模式
- 'r'只读 'w'写并覆盖 'r'写或报错 'a'写且追加
- 'b'以二进制打开 't'以文本文件打开 '+'可读写模式
- 组合使用
  - 'wb'写二进制
  - 'xb+'读写一个新的二进制文件
eg.
```py
f = open(a.txt,"rt",encoding = "utf-8")
print(f.readline())
f.close()
```

#### 文件的读写操作
- Python提供的文件读取办法


|语法|作用|返回值|
|===|===|===|
|<file>.read()|读取全部|return str|
|<file>.readline()|读取一行|return str|
|<file>.readlines()|读取所有行|return list(strings)|

<file>.seek(offset,from) from 0表示起始位置,1代表当前位置,2代表文件末尾 偏移offset个字节


- Python提供的文件写入方法
  <file>.write(str)   将字符串写入文件
  <file>.write(lines) 将一个字符串列表写入文件

#### with语句
- 容易忘记关闭(close)文件,写在with结构体中会自动帮你关闭,中间出错了也会关闭的
- 可以继续用try、except捕获异常